<div class="container">
  <h1>Welcome to Zonefit!</h1>

  <div class="row justify-content-center">
    <div class="col-sm-8 my-5">
      <%= form_with url: root_path, method: :get, class: "d-flex" do %>
        <%= text_field_tag :query,
              params[:query],
              class: "form-control",
              placeholder: "Type a keyword"
          %>
        <%= submit_tag "Search", name: "", class: "btn btn-primary" %>
      <% end %>
    </div>
  </div>
  <% results = PgSearch.multisearch(params[:query]) %>
  <% if results.size > 0 %>
    <% results.map do |result| %>
        <% if result.searchable_type == "Workout" %>
          <p><%= link_to result.searchable.title, workout_path(result.searchable) %></p>
        <% elsif result.searchable_type == "Recipe"  %>
          <p><%= link_to result.searchable.title, recipe_path(result.searchable)  %></p>
        <% end %>
    <% end %>
  <% elsif params[:query].present? && results.size == 0 %>
    <p>Sorry, no results match your search. Try again!</p>
  <% end %>
</div>
